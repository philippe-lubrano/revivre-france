<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="REVIVRE-FRANCE - Association des personnes qui souffrent de Troubles Anxieux">
  <title>REVIVRE-FRANCE - Association Troubles Anxieux</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <div class="logo-main">REVIVRE-FRANCE</div>
          <div class="logo-sub">Association Troubles Anxieux</div>
        </div>
        <nav>
          <button class="mobile-toggle" aria-label="Menu">
            <span></span>
            <span></span>
            <span></span>
          </button>
          <ul class="nav-menu">
            <li><a href="#accueil">Accueil</a></li>
            <li><a href="#troubles">Troubles Anxieux</a></li>
            <li><a href="#services">Nos Services</a></li>
            <li><a href="#agenda">Agenda</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="#adhesion" class="btn-nav">Adh√©rer</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <section class="hero" id="accueil">
      <div class="container">
        <h1>REVIVRE-FRANCE</h1>
        <p class="hero-subtitle">L'association des personnes qui souffrent de Troubles Anxieux</p>
        <p class="hero-description">Association ind√©pendante soutenue par des psychiatres et psychologues</p>
        <div class="hero-buttons">
          <a href="#adhesion" class="btn btn-primary">Adh√©rer √† l'Association</a>
          <a href="#don" class="btn btn-secondary">Faire un Don</a>
        </div>
      </div>
    </section>

    <section class="section" id="troubles">
      <div class="container">
        <h2 class="section-title">Les Troubles Anxieux que nous accompagnons</h2>
        <p class="section-subtitle">Nous soutenons les personnes souffrant de diff√©rents types de troubles anxieux</p>
        <div class="grid grid-4">
          <div class="card">
            <div class="card-icon">üë•</div>
            <h3>Phobie Sociale</h3>
            <p>Peur intense des situations sociales et du jugement des autres</p>
          </div>
          <div class="card">
            <div class="card-icon">üò∞</div>
            <h3>Anxi√©t√© G√©n√©ralis√©e</h3>
            <p>Inqui√©tude excessive et persistante dans la vie quotidienne</p>
          </div>
          <div class="card">
            <div class="card-icon">üíì</div>
            <h3>Trouble Panique</h3>
            <p>Attaques de panique r√©currentes et impr√©visibles</p>
          </div>
          <div class="card">
            <div class="card-icon">üö™</div>
            <h3>Agoraphobie</h3>
            <p>Peur des espaces ouverts ou des situations dont il est difficile de s'√©chapper</p>
          </div>
        </div>
      </div>
    </section>

    <section class="section section-gray" id="services">
      <div class="container">
        <h2 class="section-title">Ce que nous proposons</h2>
        <p class="section-subtitle">Un accompagnement complet pour vous aider √† mieux vivre avec vos troubles anxieux</p>
        <div class="grid grid-3">
          <div class="card">
            <div class="card-icon">üí¨</div>
            <h3>Groupes de Parole</h3>
            <p>Rencontrez d'autres personnes dans un cadre bienveillant et sans jugement. Nos groupes de parole sont anim√©s par les pairs, sans professionnels de sant√©.</p>
          </div>
          <div class="card">
            <div class="card-icon">üå≥</div>
            <h3>Sorties</h3>
            <p>Participez √† des activit√©s en groupe pour briser l'isolement et reprendre confiance en vous dans un environnement soutenant.</p>
          </div>
          <div class="card">
            <div class="card-icon">üéì</div>
            <h3>Ateliers</h3>
            <p>D√©couvrez des techniques pratiques et des outils pour mieux g√©rer votre anxi√©t√© au quotidien.</p>
          </div>
          <div class="card">
            <div class="card-icon">üìö</div>
            <h3>Site d'Information</h3>
            <p>Acc√©dez √† une mine d'informations sur les troubles anxieux, les traitements et les ressources disponibles.</p>
          </div>
          <div class="card">
            <div class="card-icon">üé§</div>
            <h3>Conf√©rences</h3>
            <p>Assistez √† des conf√©rences anim√©es par des experts pour mieux comprendre les troubles anxieux.</p>
          </div>
          <div class="card">
            <div class="card-icon">ü§ù</div>
            <h3>Partenariats</h3>
            <p>Nous collaborons avec des professionnels de sant√© et d'autres associations pour vous offrir le meilleur soutien.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="section section-blue">
      <div class="container">
        <div class="highlight-box">
          <h3>Une approche unique : les groupes de parole entre pairs</h3>
          <p>Nos groupes de parole sont anim√©s par les participants eux-m√™mes, sans la pr√©sence de professionnels de sant√©. Cette approche permet de cr√©er un espace d'√©change libre et authentique, o√π chacun peut partager son v√©cu sans crainte du jugement. Vous n'√™tes pas seul dans votre parcours.</p>
        </div>
      </div>
    </section>

    <section class="section" id="agenda">
      <div class="container">
        <h2 class="section-title">Prochains Groupes de Parole</h2>
        <p class="section-subtitle">Rejoignez-nous lors de nos prochaines rencontres</p>
        <div id="agenda-events"><!-- dynamic events will be injected here --></div>

        <!-- Fallback static markup (will be shown if JS fails or while loading) -->
        <div id="agenda-fallback" class="grid grid-2">
          <div class="event-card">
            <div class="event-date">
              <div class="day">11</div>
              <div class="month">Octobre</div>
            </div>
            <div class="event-content">
              <h3>Groupe de Parole en Pr√©sentiel</h3>
              <p class="event-info">üìç Paris - Lieu pr√©cis communiqu√© aux adh√©rents</p>
              <p class="event-info">üïê Samedi apr√®s-midi</p>
              <p>√âchange libre entre pairs dans une ambiance bienveillante</p>
            </div>
          </div>
          <div class="event-card">
            <div class="event-date">
              <div class="day">17</div>
              <div class="month">Octobre</div>
            </div>
            <div class="event-content">
              <h3>Groupe de Parole en Visioconf√©rence</h3>
              <p class="event-info">üíª En ligne via plateforme s√©curis√©e</p>
              <p class="event-info">üïê Vendredi soir</p>
              <p>Accessible depuis chez vous pour plus de confort</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section section-gray" id="adhesion">
      <div class="container">
        <h2 class="section-title">Vous pouvez nous aider</h2>
        <p class="section-subtitle">Votre soutien nous permet de continuer notre mission</p>
        <div class="grid grid-2">
          <div class="card card-cta">
            <h3>Adh√©rer √† l'association</h3>
            <p>Devenez membre de REVIVRE-FRANCE et participez activement √† la vie de l'association. Votre adh√©sion nous aide √† organiser plus d'√©v√©nements et √† soutenir davantage de personnes.</p>
            <a href="#adhesion" class="btn btn-primary">Adh√©rer maintenant</a>
          </div>
          <div class="card card-cta" id="don">
            <h3>Faire un don</h3>
            <p>Chaque contribution, quelle que soit sa taille, fait une diff√©rence. Votre don nous permet de maintenir nos activit√©s gratuites et accessibles √† tous.</p>
            <a href="#don" class="btn btn-primary">Faire un don</a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer id="contact">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-col">
          <h4>√Ä propos</h4>
          <ul>
            <li><a href="#accueil">L'Association</a></li>
            <li><a href="#troubles">Troubles Anxieux</a></li>
            <li><a href="#services">Nos Activit√©s</a></li>
            <li><a href="#agenda">Agenda</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Ressources</h4>
          <ul>
            <li><a href="#troubles">Phobie Sociale</a></li>
            <li><a href="#troubles">Anxi√©t√© G√©n√©ralis√©e</a></li>
            <li><a href="#troubles">Trouble Panique</a></li>
            <li><a href="#troubles">Agoraphobie</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Participer</h4>
          <ul>
            <li><a href="#adhesion">Adh√©rer</a></li>
            <li><a href="#don">Faire un Don</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="#agenda">√âv√©nements</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Newsletter</h4>
          <p class="footer-text">Restez inform√© de nos actualit√©s</p>
          <form class="newsletter-form">
            <input type="email" placeholder="Votre email" required>
            <button type="submit">OK</button>
          </form>
          <div class="social-links">
            <a href="#" aria-label="Facebook">üìò</a>
            <a href="#" aria-label="LinkedIn">üíº</a>
            <a href="#" aria-label="Instagram">üì∑</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 REVIVRE-FRANCE - Association Troubles Anxieux. Tous droits r√©serv√©s.</p>
      </div>
    </div>
  </footer>

  <script src="script.js"></script>
  <script>
    (function(){
      async function fetchAgenda() {
        const start = new Date();
        const end = new Date(start);
        end.setDate(end.getDate() + 7);
        
        const fmt = d => d.toISOString().slice(0,10);

        // send parameters in multipart/form-data body (FormData)
        const apiUrl = 'https://www.revivre-france.org/page/ressources/agenda-events';
        const form = new FormData();
        form.append('id', '129622');
        form.append('pageId', '580895');
        form.append('start', fmt(start));
        form.append('end', fmt(end));

        const controller = new AbortController();
        const timeout = setTimeout(() => controller.abort(), 10000);

        try {
          const res = await fetch(apiUrl, {
            method: 'POST',
            body: form,
            signal: controller.signal
          });
          clearTimeout(timeout);

          if (!res.ok) throw new Error('HTTP ' + res.status);
          const data = await res.json();

          renderEvents(data);
        } catch (err) {
          console.warn('Agenda fetch failed:', err);
        }
      }

      function renderEvents(items) {
        if (!Array.isArray(items) || items.length === 0) return;
        const container = document.getElementById('agenda-events');
        if (!container) return;
        // hide fallback
        const fallback = document.getElementById('agenda-fallback');
        if (fallback) fallback.style.display = 'none';

        const grid = document.createElement('div');
        grid.className = 'grid grid-2';
        grid.style.display = 'grid';
        grid.style.gap = '2rem';
        grid.style.gridTemplateColumns = 'repeat(2,1fr)';

        items.forEach(it => {
          // expected fields: date, title, location, time, description
          const card = document.createElement('div');
          card.className = 'event-card';
          card.style.background = '#ffffff';
          card.style.borderRadius = '12px';
          card.style.overflow = 'hidden';
          card.style.boxShadow = '0 4px 15px rgba(0,0,0,0.1)';
          card.style.display = 'flex';
          card.style.transition = 'transform 0.3s';
          card.style.borderLeft = '4px solid #22a7f0';

          const dateCol = document.createElement('div');
          dateCol.className = 'event-date';
          dateCol.style.background = 'linear-gradient(135deg,#22a7f0,#223f93)';
          dateCol.style.color = '#ffffff';
          dateCol.style.padding = '2rem 1.5rem';
          dateCol.style.textAlign = 'center';
          dateCol.style.display = 'flex';
          dateCol.style.flexDirection = 'column';
          dateCol.style.justifyContent = 'center';
          dateCol.style.minWidth = '120px';

          const day = document.createElement('div');
          day.className = 'day';
          day.style.fontSize = '3rem';
          day.style.fontWeight = '700';
          day.style.lineHeight = '1';
          const d = parseDateForDisplay(it.date || it.start || it.eventDate);
          day.textContent = d.day;

          const month = document.createElement('div');
          month.className = 'month';
          month.style.fontSize = '1rem';
          month.style.textTransform = 'uppercase';
          month.style.marginTop = '0.5rem';
          month.textContent = d.month;

          dateCol.appendChild(day);
          dateCol.appendChild(month);

          const content = document.createElement('div');
          content.className = 'event-content';
          content.style.padding = '2rem';
          content.style.flex = '1';

          const title = document.createElement('h3');
          title.style.color = '#223f93';
          title.style.marginBottom = '1rem';
          title.style.fontSize = '1.5rem';
          title.textContent = it.title || it.name || 'Groupe de parole';

          const info1 = document.createElement('p');
          info1.className = 'event-info';
          info1.style.color = '#8b95a5';
          info1.style.fontSize = '0.95rem';
          info1.style.marginBottom = '0.5rem';
          info1.textContent = it.location || it.venue || '';

          const info2 = document.createElement('p');
          info2.className = 'event-info';
          info2.style.color = '#8b95a5';
          info2.style.fontSize = '0.95rem';
          info2.style.marginBottom = '0.5rem';
          info2.textContent = it.time || it.startTime || '';

          const desc = document.createElement('p');
          desc.style.color = '#4a5568';
          desc.textContent = it.description || '';

          content.appendChild(title);
          if (info1.textContent) content.appendChild(info1);
          if (info2.textContent) content.appendChild(info2);
          if (desc.textContent) content.appendChild(desc);

          card.appendChild(dateCol);
          card.appendChild(content);

          grid.appendChild(card);
        });

        container.appendChild(grid);
      }

      function parseDateForDisplay(dateStr) {
        if (!dateStr) return { day: '', month: '' };
        const d = new Date(dateStr);
        if (isNaN(d)) return { day: '', month: '' };
        const day = String(d.getDate()).padStart(2,'0');
        const month = d.toLocaleString('fr-FR', { month: 'long' });
        return { day, month };
      }

      // run after DOM ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', fetchAgenda);
      } else {
        fetchAgenda();
      }
    })();
  </script>
</body>
</html>
